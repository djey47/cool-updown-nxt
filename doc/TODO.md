TODOs
=====
- Code TODOs

- COMMON
  - [X] Add package scripts at root to easily install and run the app in prod mode
  - [ ] See to create transverse api model at highest level to be used with API/WEB
    - Requires deps to external types so may be an external library
    - Alternative solution: replace external types with minimum required interfaces (but at risk of type incompatibility)

- WEB/FRONTEND
  - PWA
    - [X] Basic support
    - [ ] Standalone chrome app on android
      - Requires DNS for URL? + port redirection
  - ESLint
    - [X] Basic support
    - [ ] plugin react hooks
  - Unit tests mechanism
    - [ ] Basic support
  - [ ] Configuration
  - [ ] Router
  - [X] React Query
  - [ ] Dashboard
    - [ ] Handle API call errors (4xx, 5xx)
    - [ ] Click outside to close drop down menu...  [https://www.robinwieruch.de/react-hook-detect-click-outside-component/]
    - [ ] device tiles
      - [X] power status,
      - [X] uptime
      - diags results
        - [X] SSH connectivity
        - [X] HTTP with link
        - [ ] detailed view: ping value when available
            - [ ] UX (modal?)
      - rdp via URI scheme (https://learn.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri#ms-rd-uri-scheme)
      - Menu: 
        - per-device logs
        - per-device config
        - ???
      - [ ] Power notifications: when ON/OFF status changes, display toast
    - [X] Toaster on power actions
  - [ ] Global logs with filters
  - [ ] Config (web app, server)
    - [ ] About (web UI / server meta)

- API/BACKEND
  - Authentication system
    - [X] Basic auth
  - Unit tests mechanism
    - [X] Jest set-up
    - [X] unit tests for routes
  - [X] ESLint
  - [X] Static file server for the web-application
  - Handle critical errors => 500?
  - SSH
    - [X] Always execute exit command automatically
    - [X] Dispose
  - Services
    - [ ] enhancement: Websocket support for diags/stats refresh
    - [X] Home service
    - Config service
      - [X] Basic implementation
      - [X] Per device (path param)
      - [X] Sensitive info obfuscation
    - Logs service
      - [X] Basic implementation
      - Path params
        - [ ] per device id
        - [ ] per device tag        
      - Filters 
        - [X] nb of last events
        - [ ] time window (min/max date),
        - [ ] log levels?
    - Diags service
      - SSH connectivity
        - [X] Base implem
        - [X] unit tests with coverage (same as power off via SSH)
      - [ ] Web server
      - Ping support
        - [X] response time in ms
      - [X] Per device (path param)
      - [ ] Per tags (query string)
      - 
    - [ ] Stats service
      - [X] Per device (path param)
      - [ ] Per tags (query string)
      - [ ] Uptime (app and per device)
      - [ ] ....?
    - Scheduling service
      - [ ] Recreate jobs from saved context at app start + start if enabled. Override default schedules values.
      - [ ] Add schedule
      - [ ] Remove schedule by id
      - [ ] List all schedules
        - [X] Basic info
        - [ ] Next job execution time (absolute)
      - [ ] Display schedules by device id
        - [X] Basic info
        - [ ] Same details as all schedules
      - [ ] Display schedules by sch id
        - [ ] Basic info
        - [ ] Same details as all schedules
    - ON/OFF service
      - From schedule
        - [X] ID list as parameter for ON and OFF
        - [ ] Schedule deviceId special value 'ALL' to apply on every device
      - Unitary (path param)
        - ON
        - OFF
          - [X] Implem
          - [X] Complete unit tests with coverage
      - [ ] From ID list (query param)
      - [ ] From tag
      - [ ] All
    - [ ] Devices service
      - [ ] lists all devices with Id and basic info
  - Processors
    - Diags
      - [X] Skeleton with configured diag interval
      - Ping support
        - [X] base implem
        - [X] Ping latency to be extracted from command output and available in API (waiting for a better solution)
        - [X] Send 4 ping packets instead of 2 for more accurate results
        - ??
      - Power state
        - [X] last on attempt date (API)
        - [X] last on attempt date (external)
        - [X] last on attempt date (scheduled)
        - [X] last off attempt date (API)
        - [X] last off attempt date (external)
        - [X] last off attempt date (scheduled)
        - [X] cause of last on and off attempt(api, scheduled, external...)
        - [X] log power state change
      - SSH connectivity
        - [X] basic suppoort
        - ?
      - Web server (page)
        - [ ] basic support
      - [ ] ?
    - [ ] Stats
      - [X] Uptimes: app, per device (current and overall)
      - [ ] Ping packet loss and RTT on some time interval (day? week? month?...)
      - [ ] ?
  - Transversal
    - [ ] Config: validation at startup
    - [ ] Config : App => debugMode
    - Context persistence
      - [X] At start: restore context from file
      - [X] At exit: save to file
